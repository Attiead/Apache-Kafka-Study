### 카프카 커넥트
#####카프카 커넥트 소개
* 카프카 오픈소스에 포함된 툴
* 데이터 파이프라인 생성 시 반복 작업을 줄이고 효율적인 전송을 이루기 위한 애플리케이션
##### 필요한 이유?
* 반복적인 파이프라인 작업에서 매번 프로듀서, 컨슈머 애플리케이션을 개발, 배포, 운영하는 것은 비효율적
* 반복되는 특정한 작업 형태를 템플릿으로 만들어 놓은 커넥터를 실행하여 반복 작업을 줄임
  * ex. 토픽 이름, 파일 이름, 테이블 이름등
##### 커넥터 구분
* 소스 커넥터(프로듀서 역할) & 싱크 커넥터(컨슈머 역할)
  * ex. 커넥터 : jdbc / 소스(싱크)애플리케이션 : MySQL
  * 흐름
    * 소스 애플리케이션 > 소스 커넥터(카프카 커넥트) > 토픽 > 싱크 커넥터(카프카 커넥트) > 싱크 애플리케이션
    * ex. MySQL, MongoDBem
* 오픈소스 커넥터 & 직접 개발 커넥터
##### 커넥터 작동 모습
1. 사용자가 커넥터 생성 명령
2. 커넥트는 내부에 커넥터와 태스크를 생성하고, 커넥트가 태스크를 관리
3. 태스크는 실질적인 데이터 처리
4. (옵션사항)사용자가 컨버터와 트랜스폼 기능을 옵션으로 추가 가능
   * 컨버터 : 데이터를 처리하기 전에 스키마를 변경
   * 트랜스폼 : 데이터 처리 시 각 메시지 단위로 데이터를 간단하게 변환하기 위한 용도
##### 커넥터 실행 방법
1. 단일 모드 커넥트
   * 단일 애플리케이션으로 실행
   * 1개 프로세스만 실행
   * 고가용성이 구성X
    >고가용성 : 서버와 네트워크 또는 프로그램 등의 정보 시스템이 상당히 오랜기간 동안 지속적으로 장애 없이 정상 운영이 가능한 성질
   * 개발환경이나 중요도가 낮은 파이프라인을 운영할때 사용
   * 실행 시, 커넥트 설정 파일(connect-standalone.properties), 커넥터 설정 파일 둘다 정의하여야 함
2. 분산 모드 커넥트
   * 2대 이상의 서버에서 클러스터 형태로 운영, 단일 모드 커넥트 대비 안전하게 운영 가능 
   * 분산 모드 설정 파일(connect-distributed.properties)
   * 위 설정 파일 한 후 커넥터는 커넥트가 실행된 이후에 REST API를 통해 실행 중단 변경 가능
   * 저자 추천

### 소스 커넥터
* 구현
  * 오픈소스 커넥터를 이용 하거나
  * 카프카 커넥트 라이브러리에서 제공하는 SourceConnector와 SourceTask 클래스를 사용하여 직접 구현 가능, 구현한 커넥터를 빌드하여 .jar로 만들어 플러그인에 추가 가능
    * build connect-api
    * SourceConnector : 태스크를 실행하기 전 커넥터 설정 파일을 초기화하고 어떤 태스크 클래스를 사용할 것인지 정의
    * SourceTask 
      * 실제로 데이터를 다루는 클래스, 데이터를 가져와 토픽으로 데이터를 보내는 역할
      * 토픽에서 사용하는 오프셋이 아닌 자체적으로 사용하는 오프셋을 사용
        * 오프셋 스토리지에 데이터를 저장
  * 주의 사항
    * 사용자가 직접 작성한 클래스뿐만 아니라 참조하는 라이브러리도 함께 빌드하여 jar로 압축해야 함.<br>
      -> 빌드하지 않고 커넥트의 플러그인으로 추가하며 커넥터 실행 시 ClassNotFoundException ??플러그인?? 소프트웨어의 일부
    * 커넥터는 컨슈머나 프로듀서와 다르게 플러그인 형태로 동작하므로, 커넥터 그 자체로는 실행을 할 수 없고, 실행을 하기 위해서는 gradle jar 명령으로 jar를 생성하고, 커텍트 플러그인 디렉토리에 넣으면 된다고 함  